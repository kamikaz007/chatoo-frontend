{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);useEffect(()=>{const script=document.createElement('script');script.src=\"https://sdk.minepi.com/pi-sdk.js\";script.async=true;script.onload=()=>{if(window.Pi){window.Pi.init({version:\"2.0\",sandbox:true});}};document.head.appendChild(script);},[]);const login=async()=>{try{const auth=await window.Pi.authenticate(['username','payments'],p=>{});setUser(auth.user);}catch(e){alert(\"Please open this link inside Pi Browser\");}};const handlePay=async()=>{try{await window.Pi.createPayment({amount:0.1,memo:\"Chatoo Test Payment\",metadata:{id:Date.now()}},{onReadyForServerApproval:id=>fetch('https://chatoo-backend.onrender.com/approve',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({paymentId:id})}),onReadyForServerCompletion:(id,tx)=>fetch('https://chatoo-backend.onrender.com/complete',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({paymentId:id,txid:tx})}),onCancel:()=>console.log(\"Payment Cancelled\"),onError:e=>alert(\"Payment Error: \"+e.message)});}catch(e){alert(e.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#0b101b',height:'100vh',color:'white',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{border:'2px solid #ffc107',padding:'10px 30px',borderRadius:'15px',marginBottom:'30px'},children:[\"CHA\",/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffc107'},children:\"TOO\"})]}),!user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'20px'},children:\"\\u064A\\u062C\\u0628 \\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \\u0623\\u0648\\u0644\\u0627\\u064B \\u0644\\u0644\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"button\",{onClick:login,style:{padding:'15px 40px',backgroundColor:'#ffc107',color:'black',border:'none',borderRadius:'10px',fontWeight:'bold'},children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644 \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629 Pi\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'18px',marginBottom:'10px'},children:[\"\\u0623\\u0647\\u0644\\u0627\\u064B \\u0628\\u0643\\u060C \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffc107'},children:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePay,style:{padding:'15px 40px',backgroundColor:'#25d366',color:'white',border:'none',borderRadius:'10px',fontWeight:'bold'},children:\"\\u062F\\u0641\\u0639 0.1 Pi \\u0644\\u0644\\u0627\\u0633\\u062A\\u0645\\u0631\\u0627\\u0631\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","user","setUser","script","document","createElement","src","async","onload","window","Pi","init","version","sandbox","head","appendChild","login","auth","authenticate","p","e","alert","handlePay","createPayment","amount","memo","metadata","id","Date","now","onReadyForServerApproval","fetch","method","headers","body","JSON","stringify","paymentId","onReadyForServerCompletion","tx","txid","onCancel","console","log","onError","message","style","backgroundColor","height","color","display","flexDirection","alignItems","justifyContent","textAlign","children","border","padding","borderRadius","marginBottom","onClick","fontWeight","fontSize","username"],"sources":["/data/data/com.termux/files/home/ChatooProject/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = \"https://sdk.minepi.com/pi-sdk.js\";\n    script.async = true;\n    script.onload = () => {\n      if (window.Pi) {\n        window.Pi.init({ version: \"2.0\", sandbox: true });\n      }\n    };\n    document.head.appendChild(script);\n  }, []);\n\n  const login = async () => {\n    try {\n      const auth = await window.Pi.authenticate(['username', 'payments'], (p) => {});\n      setUser(auth.user);\n    } catch (e) {\n      alert(\"Please open this link inside Pi Browser\");\n    }\n  };\n\n  const handlePay = async () => {\n    try {\n      await window.Pi.createPayment({\n        amount: 0.1,\n        memo: \"Chatoo Test Payment\",\n        metadata: { id: Date.now() }\n      }, {\n        onReadyForServerApproval: (id) => fetch('https://chatoo-backend.onrender.com/approve', {\n          method: 'POST',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({ paymentId: id })\n        }),\n        onReadyForServerCompletion: (id, tx) => fetch('https://chatoo-backend.onrender.com/complete', {\n          method: 'POST',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({ paymentId: id, txid: tx })\n        }),\n        onCancel: () => console.log(\"Payment Cancelled\"),\n        onError: (e) => alert(\"Payment Error: \" + e.message)\n      });\n    } catch (e) {\n      alert(e.message);\n    }\n  };\n\n  return (\n    <div style={{ backgroundColor: '#0b101b', height: '100vh', color: 'white', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', textAlign: 'center' }}>\n      <h1 style={{ border: '2px solid #ffc107', padding: '10px 30px', borderRadius: '15px', marginBottom: '30px' }}>\n        CHA<span style={{ color: '#ffc107' }}>TOO</span>\n      </h1>\n\n      {!user ? (\n        <div>\n          <p style={{ marginBottom: '20px' }}>يجب تسجيل الدخول أولاً للمتابعة</p>\n          <button onClick={login} style={{ padding: '15px 40px', backgroundColor: '#ffc107', color: 'black', border: 'none', borderRadius: '10px', fontWeight: 'bold' }}>\n            تسجيل الدخول بواسطة Pi\n          </button>\n        </div>\n      ) : (\n        <div>\n          <p style={{ fontSize: '18px', marginBottom: '10px' }}>أهلاً بك، <span style={{ color: '#ffc107' }}>{user.username}</span></p>\n          <button onClick={handlePay} style={{ padding: '15px 40px', backgroundColor: '#25d366', color: 'white', border: 'none', borderRadius: '10px', fontWeight: 'bold' }}>\n            دفع 0.1 Pi للاستمرار\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}