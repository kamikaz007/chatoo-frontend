{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[user,setUser]=useState(null);useEffect(()=>{// تحميل مكتبة Pi SDK\nconst script=document.createElement('script');script.src=\"https://sdk.minepi.com/pi-sdk.js\";script.async=true;script.onload=()=>{window.Pi.init({version:\"2.0\",sandbox:true});};document.head.appendChild(script);},[]);const login=async()=>{try{const auth=await window.Pi.authenticate(['username','payments'],p=>{});setUser(auth.user);}catch(e){alert(\"افتح التطبيق من Pi Browser\");}};const handlePay=async()=>{try{await window.Pi.createPayment({amount:0.1,memo:\"Chatoo Test Payment\",metadata:{id:Date.now()}},{onReadyForServerApproval:id=>fetch('https://targeted-university-indices-crystal.trycloudflare.com/approve',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({paymentId:id})}),onReadyForServerCompletion:(id,tx)=>fetch('https://targeted-university-indices-crystal.trycloudflare.com/complete',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({paymentId:id,txid:tx})}),onCancel:()=>console.log(\"تم إلغاء الدفع\"),onError:e=>alert(e.message)});}catch(e){alert(e.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#0b141a',height:'100vh',color:'white',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',fontFamily:'sans-serif'},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{border:'2px solid #ffc107',padding:'10px 30px',borderRadius:'15px'},children:[\"CHA\",/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffc107'},children:\"TOO\"})]}),!user?/*#__PURE__*/_jsx(\"button\",{onClick:login,style:{marginTop:'20px',padding:'15px 40px',backgroundColor:'#ffc107',color:'black',border:'none',borderRadius:'10px',fontWeight:'bold'},children:\"\\u062F\\u062E\\u0648\\u0644 \\u0628\\u0648\\u0627\\u0633\\u0637\\u0629 Pi\"}):/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0623\\u0647\\u0644\\u0627\\u064B \",user.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePay,style:{padding:'15px 40px',backgroundColor:'#25d366',color:'white',border:'none',borderRadius:'10px',fontWeight:'bold'},children:\"\\u062F\\u0641\\u0639 (\\u0627\\u0644\\u062E\\u0637\\u0648\\u0629 10)\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","user","setUser","script","document","createElement","src","async","onload","window","Pi","init","version","sandbox","head","appendChild","login","auth","authenticate","p","e","alert","handlePay","createPayment","amount","memo","metadata","id","Date","now","onReadyForServerApproval","fetch","method","headers","body","JSON","stringify","paymentId","onReadyForServerCompletion","tx","txid","onCancel","console","log","onError","message","style","backgroundColor","height","color","display","flexDirection","alignItems","justifyContent","fontFamily","children","border","padding","borderRadius","onClick","marginTop","fontWeight","textAlign","username"],"sources":["/data/data/com.termux/files/home/ChatooProject/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // تحميل مكتبة Pi SDK\n    const script = document.createElement('script');\n    script.src = \"https://sdk.minepi.com/pi-sdk.js\";\n    script.async = true;\n    script.onload = () => { window.Pi.init({ version: \"2.0\", sandbox: true }); };\n    document.head.appendChild(script);\n  }, []);\n\n  const login = async () => {\n    try {\n      const auth = await window.Pi.authenticate(['username', 'payments'], (p) => {});\n      setUser(auth.user);\n    } catch (e) { alert(\"افتح التطبيق من Pi Browser\"); }\n  };\n\n  const handlePay = async () => {\n    try {\n      await window.Pi.createPayment({\n        amount: 0.1, \n        memo: \"Chatoo Test Payment\", \n        metadata: { id: Date.now() }\n      }, {\n        onReadyForServerApproval: (id) => fetch('https://targeted-university-indices-crystal.trycloudflare.com/approve', { \n          method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ paymentId: id }) \n        }),\n        onReadyForServerCompletion: (id, tx) => fetch('https://targeted-university-indices-crystal.trycloudflare.com/complete', { \n          method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ paymentId: id, txid: tx }) \n        }),\n        onCancel: () => console.log(\"تم إلغاء الدفع\"),\n        onError: (e) => alert(e.message)\n      });\n    } catch (e) { alert(e.message); }\n  };\n\n  return (\n    <div style={{backgroundColor:'#0b141a', height:'100vh', color:'white', display:'flex', flexDirection:'column', alignItems:'center', justifyContent:'center', fontFamily:'sans-serif'}}>\n      <h1 style={{border:'2px solid #ffc107', padding:'10px 30px', borderRadius:'15px'}}>CHA<span style={{color:'#ffc107'}}>TOO</span></h1>\n      {!user ? (\n        <button onClick={login} style={{marginTop:'20px', padding:'15px 40px', backgroundColor:'#ffc107', color:'black', border:'none', borderRadius:'10px', fontWeight:'bold'}}>دخول بواسطة Pi</button>\n      ) : (\n        <div style={{textAlign:'center'}}>\n          <p>أهلاً {user.username}</p>\n          <button onClick={handlePay} style={{padding:'15px 40px', backgroundColor:'#25d366', color:'white', border:'none', borderRadius:'10px', fontWeight:'bold'}}>دفع (الخطوة 10)</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}