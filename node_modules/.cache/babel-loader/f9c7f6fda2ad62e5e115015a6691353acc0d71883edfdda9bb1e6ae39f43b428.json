{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[user,setUser]=useState(null);useEffect(()=>{const initPi=()=>{if(window.Pi){window.Pi.init({version:\"2.0\",sandbox:true});console.log(\"Pi SDK Ready\");}};const script=document.createElement('script');script.src=\"https://sdk.minepi.com/pi-sdk.js\";script.async=true;script.onload=initPi;document.head.appendChild(script);},[]);const login=async()=>{try{const auth=await window.Pi.authenticate(['username','payments'],p=>{});setUser(auth.user);}catch(e){alert(\"يجب فتح الرابط من داخل Pi Browser حصراً\");}};const handlePay=async()=>{try{await window.Pi.createPayment({amount:0.1,memo:\"Chatoo Test Payment\",metadata:{id:Date.now()}},{onReadyForServerApproval:id=>fetch('https://chatoo-backend.onrender.com/approve',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({paymentId:id})}),onReadyForServerCompletion:(id,tx)=>fetch('https://chatoo-backend.onrender.com/complete',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({paymentId:id,txid:tx})}),onCancel:()=>console.log(\"تم إلغاء الدفع\"),onError:e=>alert(\"خطأ في الدفع: \"+e.message)});}catch(e){alert(e.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#0b101b',height:'100vh',color:'white',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{border:'2px solid #ffc107',padding:'10px 30px',borderRadius:'15px',marginBottom:'30px'},children:[\"CHA\",/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffc107'},children:\"TOO\"})]}),!user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'20px'},children:\"Please login to continue\"}),/*#__PURE__*/_jsx(\"button\",{onClick:login,style:{padding:'15px 40px',backgroundColor:'#ffc107',color:'black',border:'none',borderRadius:'10px',fontWeight:'bold',cursor:'pointer'},children:\"Login with Pi\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'18px',marginBottom:'10px'},children:[\"Welcome, \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffc107'},children:user.username})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePay,style:{padding:'15px 40px',backgroundColor:'#25d366',color:'white',border:'none',borderRadius:'10px',fontWeight:'bold',cursor:'pointer'},children:\"Pay 0.1 Pi to Continue\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","user","setUser","initPi","window","Pi","init","version","sandbox","console","log","script","document","createElement","src","async","onload","head","appendChild","login","auth","authenticate","p","e","alert","handlePay","createPayment","amount","memo","metadata","id","Date","now","onReadyForServerApproval","fetch","method","headers","body","JSON","stringify","paymentId","onReadyForServerCompletion","tx","txid","onCancel","onError","message","style","backgroundColor","height","color","display","flexDirection","alignItems","justifyContent","textAlign","children","border","padding","borderRadius","marginBottom","onClick","fontWeight","cursor","fontSize","username"],"sources":["/data/data/com.termux/files/home/ChatooProject/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n\n    useEffect(() => {\n    const initPi = () => {\n      if (window.Pi) {\n        window.Pi.init({ version: \"2.0\", sandbox: true });\n        console.log(\"Pi SDK Ready\");\n      }\n    };\n\n    const script = document.createElement('script');\n    script.src = \"https://sdk.minepi.com/pi-sdk.js\";\n    script.async = true;\n    script.onload = initPi;\n    document.head.appendChild(script);\n  }, []);\n\n  const login = async () => {\n    try {\n\n      const auth = await window.Pi.authenticate(['username', 'payments'], (p) => {});\n      setUser(auth.user);\n    } catch (e) {\n      alert(\"يجب فتح الرابط من داخل Pi Browser حصراً\");\n    }\n  };\n\n  const handlePay = async () => {\n    try {\n\n      await window.Pi.createPayment({\n        amount: 0.1, \n        memo: \"Chatoo Test Payment\", \n        metadata: { id: Date.now() }\n      }, {\n\n        onReadyForServerApproval: (id) => fetch('https://chatoo-backend.onrender.com/approve', { \n          method: 'POST', \n          headers: {'Content-Type': 'application/json'}, \n          body: JSON.stringify({ paymentId: id }) \n        }),\n        onReadyForServerCompletion: (id, tx) => fetch('https://chatoo-backend.onrender.com/complete', { \n          method: 'POST', \n          headers: {'Content-Type': 'application/json'}, \n          body: JSON.stringify({ paymentId: id, txid: tx }) \n        }),\n        onCancel: () => console.log(\"تم إلغاء الدفع\"),\n        onError: (e) => alert(\"خطأ في الدفع: \" + e.message)\n      });\n    } catch (e) {\n      alert(e.message);\n    }\n  };\n  return (\n    <div style={{ backgroundColor: '#0b101b', height: '100vh', color: 'white', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', textAlign: 'center' }}>\n      <h1 style={{ border: '2px solid #ffc107', padding: '10px 30px', borderRadius: '15px', marginBottom: '30px' }}>\n        CHA<span style={{ color: '#ffc107' }}>TOO</span>\n      </h1>\n\n      {!user ? (\n        <div>\n          <p style={{ marginBottom: '20px' }}>Please login to continue</p>\n          <button onClick={login} style={{ padding: '15px 40px', backgroundColor: '#ffc107', color: 'black', border: 'none', borderRadius: '10px', fontWeight: 'bold', cursor: 'pointer' }}>\n            Login with Pi\n          </button>\n        </div>\n      ) : (\n        <div>\n          <p style={{ fontSize: '18px', marginBottom: '10px' }}>Welcome, <span style={{ color: '#ffc107' }}>{user.username}</span></p>\n          <button onClick={handlePay} style={{ padding: '15px 40px', backgroundColor: '#25d366', color: 'white', border: 'none', borderRadius: '10px', fontWeight: 'bold', cursor: 'pointer' }}>\n            Pay 0.1 Pi to Continue\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}